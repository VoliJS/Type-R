{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import { Integer, MicrosoftDate, Timestamp } from \"type-r/ext-types\";\nimport { type, ChainableAttributeSpec } from \"type-r\";\n\n/*\n * dates\n */\ndeclare global {\n    // Legacy has-notation\n    interface Function{\n        value : ( x : any ) => ChainableAttributeSpec<any>;\n        isRequired : ChainableAttributeSpec<any>;\n        asProp : PropertyDecorator\n        has : ChainableAttributeSpec<any>;\n    }\n\n    // Date type extensions\n    interface DateConstructor {\n        microsoft : ChainableAttributeSpec<this>\n        timestamp : ChainableAttributeSpec<this>\n    }\n\n    // Integer type\n    interface Window {\n        Integer : Function;\n    }\n\n    interface NumberConstructor {\n        integer : typeof Integer\n    }\n}\n\nFunction.prototype.value = function( x ) {\n    return new ChainableAttributeSpec( { type : this, value : x, hasCustomDefault : true } );\n};\n\nObject.defineProperty( Function.prototype, 'isRequired', {\n    get() { return this._isRequired || this.has.isRequired; },\n    set( x ){ this._isRequired = x; }\n});\n\nObject.defineProperty( Function.prototype, 'asProp', {\n    get() { return this.has.asProp; },\n});\n\nObject.defineProperty( Function.prototype, 'has', {\n    get() {\n        // workaround for sinon.js and other libraries overriding 'has'\n        return this._has || type( this );\n    },\n\n    set( value ) { this._has = value; }\n} );\n\n\nObject.defineProperties( Date, {\n    microsoft: {\n        value: MicrosoftDate\n    },\n\n    timestamp: {\n        value: Timestamp\n    }\n} );\n\n\n/*\n * integer\n */\n\nNumber.integer = Integer;\n\nif( typeof window !== 'undefined' ) {\n    window.Integer = Integer;\n}"],"names":["Function","prototype","value","x","ChainableAttributeSpec","type","this","hasCustomDefault","Object","defineProperty","get","_isRequired","has","isRequired","set","asProp","_has","defineProperties","Date","microsoft","MicrosoftDate","timestamp","Timestamp","Number","integer","Integer","window"],"mappings":"2QA+BAA,SAASC,UAAUC,MAAQ,SAAUC,GACjC,OAAO,IAAIC,yBAAwB,CAAEC,KAAOC,KAAMJ,MAAQC,EAAGI,kBAAmB,KAGpFC,OAAOC,eAAgBT,SAASC,UAAW,aAAc,CACrDS,eAAQ,OAAOJ,KAAKK,aAAeL,KAAKM,IAAIC,YAC5CC,aAAKX,GAAKG,KAAKK,YAAcR,KAGjCK,OAAOC,eAAgBT,SAASC,UAAW,SAAU,CACjDS,eAAQ,OAAOJ,KAAKM,IAAIG,UAG5BP,OAAOC,eAAgBT,SAASC,UAAW,MAAO,CAC9CS,eAEI,OAAOJ,KAAKU,MAAQX,OAAMC,OAG9BQ,aAAKZ,GAAUI,KAAKU,KAAOd,KAI/BM,OAAOS,iBAAkBC,KAAM,CAC3BC,UAAW,CACPjB,MAAOkB,iBAGXC,UAAW,CACPnB,MAAOoB,eASfC,OAAOC,QAAUC,UAEK,oBAAXC,SACPA,OAAOD,QAAUA"}