!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function s(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var y=function(){return(y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function u(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(e,n,s):i(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s}function c(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n]);if(2<arguments.length)for(var r=2;r<arguments.length;r++){var i=arguments[r];i&&c(t,i)}return t}function g(t){if(null===t)return!0;switch(typeof t){case"number":case"string":case"boolean":return!0;case"object":var e=Object.getPrototypeOf(t);if(e===Object.prototype||e===Array.prototype)return function(t,e){return!function(t,e){return Object.getPrototypeOf(t)===i?function(t,e){for(var n,r=0;r<t.length;r++)if(n=e(t[r],r))return n}(t,e):function(t,e){var n;for(var r in t)if(t.hasOwnProperty(r)&&(n=e(t[r],r)))return n}(t,e)}(t,function(t){return!e(t)})}(t,g)}return!1}function o(t){return Object.getPrototypeOf(t.prototype).constructor}function h(t,e,n){for(var r in e)if(e.hasOwnProperty(r)){var i=n(e[r],r);void 0===i||(t[r]=i)}return t}function p(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);if(2<arguments.length)for(var r=2;r<arguments.length;r++){var i=arguments[r];i&&p(t,i)}return t}var i=Array.prototype,l=Date.prototype,f=Object.prototype;function d(t,e){if(t===e)return!1;if(t&&e&&"object"==typeof t&&"object"==typeof e){var n=Object.getPrototypeOf(t);if(n!==Object.getPrototypeOf(e))return!0;switch(n){case l:return+t!=+e;case i:return function(t,e){if(t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(d(t[n],e[n]))return!0;return!1}(t,e);case f:case null:return function(t,e){var n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(var r=0;r<n.length;r++){var i=n[r];if(!e.hasOwnProperty(i)||d(t[i],e[i]))return!0}return!1}(t,e)}}return!0}var n=Object.create(null);function v(t){var e=Object.create(n);return t?p(e,t):e}n.hasOwnProperty=f.hasOwnProperty;var m=(e.prototype.merge=function(t){this.handlers=this.handlers.concat(t.handlers)},e.prototype.addEventsMap=function(t){for(var e in t)this.addEvent(e,t[e])},e.prototype.bubbleEvents=function(t){for(var e=0,n=t.split(A);e<n.length;e++){var r=n[e];this.addEvent(r,_(r))}},e.prototype.addEvent=function(t,e){for(var n=this.handlers,r=0,i=t.split(A);r<i.length;r++){var o=i[r];n.push(new b(o,e))}},e.prototype.subscribe=function(t,e){for(var n=0,r=this.handlers;n<r.length;n++){var i=r[n];j(e,i.name,i.callback,t)}},e.prototype.unsubscribe=function(t,e){for(var n=0,r=this.handlers;n<r.length;n++){var i=r[n];E(e,i.name,i.callback,t)}},e);function e(t){this.handlers=[],t&&(t instanceof e?this.handlers=t.handlers.slice():t&&this.addEventsMap(t))}var b=function(t,e){this.name=t,this.callback=!0===e?_(t):"string"==typeof e?function(){var t=this[e];t&&t.apply(this,arguments)}:e},t={};function _(o){return t[o]||(t[o]=function(t,e,n,r,i){void 0===r&&void 0===i||P(this,o,t,e,n,r,i),void 0!==n?N(this,o,t,e,n):S(this,o,t,e)})}var w=function(t,e,n){void 0===n&&(n=null),this.callback=t,this.context=e,this.next=n};function O(t,e,n,r){for(var i,o,s=t[e],a=s;a;a=a.next)n&&n!==a.callback&&n!==a.callback._callback||r&&r!==a.context?(o=a,i=i||a):o&&(o.next=a.next);s!==i&&(t[e]=i)}function C(t,e,n,r){for(var i=t;i;i=i.next)i.callback.call(i.context,e,n,r)}function j(t,e,n,r){if(n){var i=t._events||(t._events=Object.create(null));i[e]=new w(n,r,i[e])}}function E(t,e,n,r){var i=t._events;if(i)if(n||r)if(e)O(i,e,n,r);else for(var o in i)O(i,o,n,r);else e?i[e]=void 0:t._events=void 0}var A=/\s+/;function S(t,e,n,r){var i=t._events;if(i){var o=i[e],s=i.all;!function(t,e,n){for(var r=t;r;r=r.next)r.callback.call(r.context,e,n)}(o,n,r),C(s,e,n,r)}}function N(t,e,n,r,i){var o=t._events;if(o){var s=o[e],a=o.all;C(s,n,r,i),function(t,e,n,r,i){for(var o=t;o;o=o.next)o.callback.call(o.context,e,n,r,i)}(a,e,n,r,i)}}function P(t,e,n,r,i,o,s){var a=t._events;if(a){var u=a[e],c=a.all;!function(t,e,n,r,i,o){for(var s=t;s;s=s.next)s.callback.call(s.context,e,n,r,i,o)}(u,n,r,i,o,s),function(t,e,n,r,i,o,s){for(var a=t;a;a=a.next)a.callback.call(a.context,e,n,r,i,o,s)}(c,e,n,r,i,o,s)}}var x=(D.define=function(t,e){void 0===t&&(t={});var n=o(this);e&&p(this,e);var r=t.mixins,i=a(t,["mixins"]);return r&&this.mixins.merge(r),this.mixins.mergeObject(this.prototype,i,!0),this.mixins.mergeObject(this.prototype,this.mixins.getStaticDefinitions(n),!0),this.onDefine&&this.onDefine(this.mixins.definitions,n),this.mixins.mergeInheritedMembers(n),this},D.extend=function(t,e){var n,r;function i(){return null!==r&&r.apply(this,arguments)||this}return t&&t.hasOwnProperty("constructor")?s(n=t.constructor,this):(s(i,r=this),n=i),T(n),t&&n.define(t,e),n},D);function D(){}function T(t){var e=o(t);t.__super__=e.prototype,t.define||I.get(x).populate(t),I.get(t),t.onExtend&&t.onExtend(e)}function R(e){if("function"!=typeof e)return function(t){T(t),t.define(e)};T(e),e.define()}function k(n){return function(t){var e=I.get(t);e.definitionRules=c(v(),n,e.definitionRules)}}var I=(J.get=function(t){var e=t.mixins;return e&&t===e.Class?e:t.mixins=new J(t)},J.prototype.getStaticDefinitions=function(n){var t=v(),r=this.Class;return h(t,this.definitionRules,function(t,e){if(n[e]!==r[e])return r[e]})},J.prototype.merge=function(t){for(var e=this.Class.prototype,n=(this.mergeRules,this.appliedMixins=this.appliedMixins.slice()),r=0,i=t;r<i.length;r++){var o=i[r];if(Array.isArray(o))this.merge(o);else if(n.indexOf(o)<0)if(n.push(o),"function"==typeof o){this.mergeObject(this.Class,o);var s=o.mixins;s&&(this.mergeRules=c(v(),this.mergeRules,s.mergeRules),this.definitionRules=c(v(),this.definitionRules,s.definitionRules),this.appliedMixins=this.appliedMixins.concat(s.appliedMixins)),this.mergeObject(e,o.prototype)}else this.mergeObject(e,o)}},J.prototype.populate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t;n<r.length;n++){var i=r[n];J.get(i).merge([this.Class])}},J.prototype.mergeObject=function(r,i,o){var s=this;!function(t,e){for(var n=U[typeof t],r=0,i=Object.getOwnPropertyNames(t);r<i.length;r++){var o=i[r];n[o]||e(o)}}(i,function(t){var e,n=Object.getOwnPropertyDescriptor(i,t);(e=s.definitionRules[t])&&M(s.definitions,t,n,e,o),e&&e!==V.protoValue||M(r,t,n,s.mergeRules[t],o)})},J.prototype.mergeInheritedMembers=function(t){var e=this.mergeRules,n=this.Class;if(e){var r=n.prototype,i=t.prototype;for(var o in e){var s=e[o];r.hasOwnProperty(o)&&o in i&&(r[o]=H(r[o],i[o],s))}}},J);function J(t){this.Class=t,this.definitions={};var e=o(t).mixins;this.mergeRules=e&&e.mergeRules||v(),this.definitionRules=e&&e.definitionRules||v(),this.appliedMixins=e&&e.appliedMixins||[]}var U={function:v({length:!0,prototype:!0,caller:!0,arguments:!0,name:!0,__super__:!0}),object:v({constructor:!0})};function z(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return I.get(t).merge(e)}}var V=function(n){return function(t){var e=I.get(t);e.mergeRules=c(n,e.mergeRules)}};function M(t,e,n,r,i){if(t.hasOwnProperty(e)){var o=Object.getOwnPropertyDescriptor(t,e);o.configurable&&"value"in o&&(t[e]=i?H(n.value,o.value,r):H(o.value,n.value,r))}else Object.defineProperty(t,e,n)}function H(t,e,n){return void 0===t?e:n&&void 0!==e?n(t,e):t}V.value=function(t,e){return t},V.protoValue=function(t,e){return t},V.merge=function(t,e){return c({},t,e)},V.pipe=function(e,n){return function(t){return e.call(this,n.call(this,t))}},V.defaults=function(t,e){return function(){return c(t.apply(this,arguments),e.apply(this,arguments))}},V.classFirst=function(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}},V.classLast=function(t,e){return function(){e.apply(this,arguments),t.apply(this,arguments)}},V.every=function(t,e){return function(){return t.apply(this,arguments)&&e.apply(this,arguments)}},V.some=function(t,e){return function(){return t.apply(this,arguments)||e.apply(this,arguments)}};function F(t,e,n,r){if(n){var i=function(t){var e,n=!0;return function(){return n&&(n=!1,e=t.apply(this,arguments),t=null),e}}(function(){E(t,e,i),n.apply(this,arguments)});i._callback=n,j(t,e,i,r)}}var q=function(t,e,n,r,i){if(A.test(n))for(var o=0,s=n.split(A);o<s.length;o++){t(e,s[o],r,i)}else t(e,n,r,i)},W=j,B=E,K=P,L=S,$=N,Z=0;function G(){return"l"+Z++}var Q=(X.onDefine=function(t,e){var n=t.localEvents,r=t._localEvents,i=t.properties;if(n||r){var o=new m(this.prototype._localEvents);n&&o.addEventsMap(n),r&&o.merge(r),this.prototype._localEvents=o}i&&Object.defineProperties(this.prototype,h({},i,tt))},X.prototype.initialize=function(){},X.prototype.on=function(t,e,n){if("string"==typeof t)q(W,this,t,e,n);else for(var r in t)q(W,this,r,t[r],n||e);return this},X.prototype.once=function(t,e,n){if("string"==typeof t)q(F,this,t,e,n);else for(var r in t)q(F,this,r,t[r],n||e);return this},X.prototype.off=function(t,e,n){if(t)if("string"==typeof t)q(B,this,t,e,n);else for(var r in t)q(B,this,r,t[r],n||e);else B(this,void 0,e,n);return this},X.prototype.trigger=function(t,e,n,r,i,o){return void 0!==i||void 0!==o?K(this,t,e,n,r,i,o):void 0!==r?$(this,t,e,n,r):L(this,t,e,n),this},X.prototype.listenTo=function(t,e,n){return t&&(et(this,t),t.on(e,n||"object"!=typeof e?n:this,this)),this},X.prototype.listenToOnce=function(t,e,n){return t&&(et(this,t),t.once(e,n||"object"!=typeof e?n:this,this)),this},X.prototype.stopListening=function(t,e,n){var r=this._listeningTo;if(r){var i=!(e||n),o=n||"object"!=typeof e?n:this;if(t){var s=r[t.cid];s&&(i&&delete r[t.cid],s.off(e,o,this))}else if(null==t){for(var a in r)r[a].off(e,o,this);i&&(this._listeningTo=void 0)}}return this},X.prototype.dispose=function(){this._disposed||(this.stopListening(),this.off(),this._disposed=!0)},X=u([R,k({properties:V.merge,localEvents:V.merge})],X));function X(){this._events=void 0,this._listeningTo=void 0,this.cid=G(),this.initialize.apply(this,arguments)}var Y=function(t){for(var e={},n={},r=1;r<arguments.length;r++)n[arguments[r]]=!0;for(var i in t)!n.hasOwnProperty(i)&&t.hasOwnProperty(i)&&(e[i]=t[i]);return e}(Q.prototype,"constructor","initialize");function tt(t){if(t)return"function"==typeof t?{get:t,configurable:!0}:t}function et(t,e){(t._listeningTo||(t._listeningTo=Object.create(null)))[e.cid||(e.cid=G())]=e}var nt,rt="undefined"!=typeof process&&process.env&&"production"===process.env.NODE_ENV,it=rt?["error","info"]:["error","warn","debug","info","log"],ot=(s(st,nt=Q),st.prototype.logToConsole=function(o,s){return this.on(o,function(t,e,n){if(!s||s.test(t)){var r=["["+t+"] "+e];for(var i in n)r.push("\n\t"+i+":",at(n[i]));console[o].apply(console,r)}})},st.prototype.throwOn=function(t,r){return this.on(t,function(t,e,n){if(!r||r.test(t))throw new Error("["+t+"] "+e)})},st.prototype.count=function(r,i){var o=this;return this.on(r,function(t,e,n){i&&!i.test(t)||(o.counter[r]=(o.counter[r]||0)+1)})},st.prototype.on=function(t,e){return nt.prototype.on.call(this,t,e)},st=u([R],st));function st(){var t=null!==nt&&nt.apply(this,arguments)||this;return t.counter={},t}var at="undefined"==typeof window?function(t){if(t&&"object"==typeof t){var e=t.__inner_state__||t,n=Array.isArray(e)?"[ length = "+e.length+" ]":"{ "+Object.keys(e).join(", ")+" }";return t.constructor.name+" "+n}return JSON.stringify(t)}:function(t){return t},ut=new ot;if("undefined"!=typeof console)for(var ct=0,ht=it;ct<ht.length;ct++){var pt=ht[ct];ut.logToConsole(pt)}var lt=new ot;lt.throwOn("error").throwOn("warn");ut.trigger.bind(ut);function ft(n,t,r,i){return dt(n),n._ioPromise=t.then(function(t){n._ioPromise=null;var e=i?i(t):t;return vt(n,"sync",n,t,r),e}).catch(function(t){throw n._ioPromise=null,vt(n,"error",n,t,r),t}),n._ioPromise.abort=t.abort,n._ioPromise}function dt(t){t._ioPromise&&t._ioPromise.abort&&(t._ioPromise.abort(),t._ioPromise=null)}function vt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.trigger.apply(t,e);var r=t.collection;r&&r.trigger.apply(r,e)}var yt=/\^|(store\.[^.]+)|([^.]+)/g,gt=function(t,e){void 0===e&&(e=!1);var n=t.match(yt).map(function(t){return"^"===t||"owner"===t?"getOwner()":"~"===t[0]?'getStore().get("'+t.substr(1)+'")':0===t.indexOf("store.")?'getStore().get("'+t.substr(6)+'")':t});this.tail=e&&n.pop(),this.local=!n.length,this.resolve=new Function("self","\n            var v = self."+n.shift()+";\n                           \n            "+n.map(function(t){return"\n                v = v && v."+t+";\n            "}).join("")+"\n\n            return v;\n        ")};function mt(t,e,n){for(var r=e.match(yt),i=r.length-1,o=t,s=0;s<i;s++){var a=r[s];switch(a){case"~":o=o.getStore();break;case"^":o=o.getOwner();break;default:o=o.get(a)}if(!o)return}return n(o,r[i])}var bt=(_t.prototype.each=function(t){var e=this.error,n=this.nested;for(var r in e&&t(e,null),n)t(n[r],r)},_t.prototype.eachError=function(n,r){this.each(function(t,e){t instanceof _t?t.eachError(n,r.get(e)):n(t,e,r)})},_t);function _t(t){this.length=t._validateNested(this.nested={}),(this.error=t.validate(t))&&this.length++}var wt,Ot,Ct=N,jt=j,Et=E;(Ot=wt=wt||{})[Ot.share=1]="share",Ot[Ot.listen=2]="listen",Ot[Ot.persistent=4]="persistent";var At,St=((At=Nt).onDefine=function(t,e){t.endpoint&&(this.prototype._endpoint=t.endpoint),Q.onDefine.call(this,t,e)},Nt.onExtend=function(t){t.create===this.create&&(this.create=At.create)},Nt.create=function(t,e){return new this(t,e)},Nt.prototype.dispose=function(){this._disposed||(dt(this),this._owner=void 0,this._ownerKey=void 0,this.off(),this.stopListening(),this._disposed=!0)},Nt.prototype.onChanges=function(t,e){jt(this,this._changeEventName,t,e)},Nt.prototype.offChanges=function(t,e){Et(this,this._changeEventName,t,e)},Nt.prototype.listenToChanges=function(t,e){this.listenTo(t,t._changeEventName,e)},Nt.prototype.transaction=function(t,e){var n=Pt.begin(this),r=t.call(this,this);r&&this.set(r),n&&Pt.commit(this)},Nt.prototype.assignFrom=function(e){var n=this;return this.transaction(function(){n.set(e.__inner_state__||e,{merge:!0});var t=e._changeToken;t&&(n._changeToken=t)}),this},Nt.from=function(t,e){void 0===e&&(e={});var n=e.strict,r=a(e,["strict"]),i=this.create(t,y({},r,{logger:n?lt:void 0}));return n&&i.validationError&&i.eachValidationError(function(t,e,n){throw new Error(n.getClassName()+"."+e+": "+t)}),i},Nt.prototype.parse=function(t,e){return t},Nt.prototype.deepGet=function(t){return mt(this,t,function(t,e){return t.get?t.get(e):t[e]})},Nt.prototype.getOwner=function(){return this._owner},Nt.prototype.getStore=function(){var t=this._owner;return t?t.getStore():this._defaultStore},Nt.prototype.hasPendingIO=function(){return this._ioPromise},Nt.prototype.getEndpoint=function(){return function t(e){var n=e.collection;if(n)return t(n);if(e._owner){var r=e._owner._endpoints;return r&&r[e._ownerKey]}}(this)||this._endpoint},Object.defineProperty(Nt.prototype,"validationError",{get:function(){var t=this._validationError||(this._validationError=new bt(this));return t.length?t:null},enumerable:!0,configurable:!0}),Nt.prototype.validate=function(t){},Nt.prototype.getValidationError=function(t){var e=this.validationError;return(t?e&&e.nested[t]:e)||null},Nt.prototype.deepValidationError=function(t){return mt(this,t,function(t,e){return t.getValidationError(e)})},Nt.prototype.eachValidationError=function(t){var e=this.validationError;e&&e.eachError(t,this)},Nt.prototype.isValid=function(t){return!this.getValidationError(t)},Nt.prototype.valueOf=function(){return this.cid},Nt.prototype.toString=function(){return this.cid},Nt.prototype.getClassName=function(){var t=this.constructor.name;if("Subclass"!==t)return t},Nt=At=u([R,k({endpoint:V.value}),z(Q)],Nt));function Nt(t){this._changeToken={},this._transaction=!1,this._isDirty=null,this._owner=void 0,this._ownerKey=void 0,this._validationError=void 0,this.cid=this.cidPrefix+t}var Pt={begin:function(t){return!t._transaction&&(t._transaction=!0)},markAsDirty:function(t,e){var n=!e.silent;return n&&(t._isDirty=e),t._changeToken={},t._validationError=void 0,n},commit:function(t,e){var n=t._isDirty;if(n){for(;t._isDirty;){var r=t._isDirty;t._isDirty=null,Ct(t,t._changeEventName,t,r,e)}t._transaction=!1;var i=t._owner;i&&i!==e&&i._onChildrenChange(t,n)}else t._isDirty=null,t._transaction=!1},aquire:function(t,e,n){if(e._owner)throw new ReferenceError("Trying to aquire ownership for an object already having an owner");e._owner=t,e._ownerKey=n},free:function(t,e){t===e._owner&&(e._owner=void 0,e._ownerKey=void 0)}};var xt=Pt.begin,Dt=Pt.markAsDirty,Tt=Pt.commit,Rt=N;function kt(t,e,n){var r=It(t),i={};t._attributes[e].doUpdate(n,t,i)&&(Jt(t,i),Rt(t,"change:"+e,t,t.attributes[e],i)),r&&Tt(t)}function It(t){return!!xt(t)&&(t._previousAttributes=new t.AttributesCopy(t.attributes),!(t._changedAttributes=null))}function Jt(t,e){return t._changedAttributes&&(t._changedAttributes=null),Dt(t,e)}var Ut={transaction:function(t,e){var n=It(this);t.call(this,this),n&&Tt(this)},_onChildrenChange:function(t,e){var n=t._ownerKey,r=this._attributes[n];r&&!r.propagateChanges||this.forceAttributeChange(n,e)},forceAttributeChange:function(t,e){void 0===e&&(e={});var n=It(this);Jt(this,e)&&Rt(this,"change:"+t,this,this.attributes[t],e),n&&Tt(this)},_createTransaction:function(t,e){void 0===e&&(e={});var n,r=It(this),i=[],o=[],s=this._attributes,a=e.parse?this.parse(t,e):t;if(Vt(this,a,e)){for(var u in a){var c=s[u];c?c.doUpdate(a[u],this,e,o)&&i.push(u):(n=n||[]).push("'"+u+"'")}n&&zt(this,n,{values:a},e)}if(i.length&&Jt(this,e))return new Mt(this,r,o,i);for(var h=0,p=o;h<p.length;h++){p[h].commit(this)}r&&Tt(this)}};function zt(t,e,n,r){t._log("warn","Type-R:UnknownAttrs","undefined attributes "+e.join(", ")+" are ignored.",n,r.logger)}function Vt(t,e,n){return!(!e||e.constructor!==Object)||(t._log("error","Type-R:InvalidObject","update with non-object is ignored!",{values:e},n.logger),!1)}var Mt=(Ht.prototype.commit=function(t){for(var e=this.nested,n=this.object,r=this.changes,i=0,o=e;i<o.length;i++)o[i].commit(n);for(var s=n.attributes,a=n._isDirty,u=0,c=r;u<c.length;u++){var h=c[u];Rt(n,"change:"+h,n,s[h],a)}this.isRoot&&Tt(n,t)},Ht);function Ht(t,e,n,r){this.object=t,this.isRoot=e,this.nested=n,this.changes=r}var Ft=d,qt={},Wt=(Bt.prototype.canBeUpdated=function(t,e,n){},Bt.prototype.transform=function(t,e,n,r){return t},Bt.prototype.convert=function(t,e,n,r){return t},Bt.prototype.isChanged=function(t,e){return Ft(t,e)},Bt.prototype.handleChange=function(t,e,n,r){},Bt.prototype.create=function(){},Bt.prototype.clone=function(t,e){return t},Bt.prototype.dispose=function(t,e){this.handleChange(void 0,e,t,qt)},Bt.prototype.validate=function(t,e,n){},Bt.prototype.toJSON=function(t,e,n){return t&&t.toJSON?t.toJSON(n):t},Bt.prototype.createPropertyDescriptor=function(){var e=this.name,t=this.getHook;if("id"!==e)return{set:function(t){kt(this,e,t)},get:t?function(){return t.call(this,this.attributes[e],e)}:function(){return this.attributes[e]},configurable:!0}},Bt.prototype.initialize=function(t,e){},Bt.prototype.doInit=function(t,e,n){var r=void 0===t?this.defaultValue():t,i=this.transform(r,void 0,e,n);return this.handleChange(i,void 0,e,n),i},Bt.prototype.doUpdate=function(t,e,n,r){var i=this.name,o=e.attributes,s=o[i],a=this.transform(t,s,e,n);return o[i]=a,!!this.isChanged(a,s)&&(this.handleChange(a,s,e,n),!0)},Bt.prototype._log=function(t,e,n,r,i,o){i._log(t,e,i.getClassName()+"."+this.name+" "+n,{"New value":r,"Prev. value":i.attributes[this.name]},o)},Bt.prototype.defaultValue=function(){return this.value},Bt);function Bt(t,e){this.name=t,this.getHook=null,this.options=e;var n=y({getHooks:[],transforms:[],changeHandlers:[]},e);n.getHooks=n.getHooks.slice(),n.transforms=n.transforms.slice(),n.changeHandlers=n.changeHandlers.slice();var r=n.value,i=n.type,o=n.parse,s=n.toJSON,a=n.changeEvents,u=n.validate,c=n.getHooks,h=n.transforms,p=n.changeHandlers;if(this.value=r,this.type=i,!n.hasCustomDefault&&i?this.defaultValue=this.create:g(r)?this.defaultValue=new Function("return "+JSON.stringify(r)+";"):this.defaultValue=this.defaultValue,this.propagateChanges=!1!==a,this.toJSON=void 0===s?this.toJSON:s,this.validate=u||this.validate,n.isRequired&&(this.validate=function(r){return function(t,e,n){return e?r.call(this,t,e,n):"Required"}}(this.validate)),h.unshift(this.convert),this.get&&c.unshift(this.get),this.initialize.call(this,n),c.length){var l=this.getHook=c.reduce(Kt),f=this.validate;this.validate=function(t,e,n){return f.call(this,t,l.call(t,e,n),n)}}this.transform=h.length?h.reduce(Lt):this.transform,this.handleChange=p.length?p.reduce($t):this.handleChange;var d=this.doInit,v=this.doUpdate;this.doInit=o?function(t,e,n){return d.call(this,n.parse&&void 0!==t?o.call(e,t,this.name):t,e,n)}:d,this.doUpdate=o?function(t,e,n,r){return v.call(this,n.parse&&void 0!==t?o.call(e,t,this.name):t,e,n,r)}:v}function Kt(n,r){return function(t,e){return r.call(this,n.call(this,t,e),e)}}function Lt(i,o){return function(t,e,n,r){return o.call(this,i.call(this,t,e,n,r),e,n,r)}}function $t(i,o){return function(t,e,n,r){i.call(this,t,e,n,r),o.call(this,t,e,n,r)}}var Zt,Gt=(s(Qt,Zt=Wt),Qt.prototype.create=function(){return new this.type},Qt.prototype.convert=function(t){return null==t||t instanceof this.type?t:new this.type(t)},Qt.prototype.toJSON=function(t,e,n){return t&&t.toJSON?t.toJSON(n):t},Qt.prototype.clone=function(t){return new this.type(this.toJSON(t))},Qt.prototype.isChanged=function(t,e){return t!==e},Qt);function Qt(){return null!==Zt&&Zt.apply(this,arguments)||this}var Xt,Yt=(s(te,Xt=Wt),te.prototype.dispose=function(){},te.prototype.create=function(){return this.type()},te.prototype.toJSON=function(t){return t},te.prototype.convert=function(t){return null==t?t:this.type(t)},te.prototype.isChanged=function(t,e){return t!==e},te.prototype.clone=function(t){return t},te.prototype.doInit=function(t,e,n){return this.transform(void 0===t?this.value:t,void 0,e,n)},te.prototype.doUpdate=function(t,e,n,r){var i=this.name,o=e.attributes,s=o[i];return s!==(o[i]=this.transform(t,s,e,n))},te.prototype.initialize=function(){this.options.hasCustomDefault||(this.value=this.type())},te);function te(){return null!==Xt&&Xt.apply(this,arguments)||this}var ee,ne=(s(re,ee=Yt),re.prototype.create=function(){return 0},re.prototype.convert=function(t,e,n,r){var i=null==t?t:this.type(t);return i!=i&&this._log("error","Type-R:InvalidNumber","Number attribute is assigned with an invalid number",t,n,r.logger),i},re.prototype.validate=function(t,e,n){if(null!=e&&!isFinite(e))return n+" is not valid number"},re);function re(){return null!==ee&&ee.apply(this,arguments)||this}var ie,oe=(s(se,ie=Wt),se.prototype.toJSON=function(t){return t},se.prototype.dispose=function(){},se.prototype.create=function(){return[]},se.prototype.convert=function(t,e,n,r){return null==t||Array.isArray(t)?t:(this._log("error","Type-R:InvalidArray","Array attribute assigned with non-array value",t,n,r.logger),[])},se.prototype.clone=function(t){return t&&t.slice()},se);function se(){return null!==ie&&ie.apply(this,arguments)||this}var ae,ue=(s(ce,ae=Wt),ce.prototype.create=function(){return{}},ce.prototype.convert=function(t,e,n,r){return null==t||"object"==typeof t?t:(this._log("error","Type-R:InvalidObject","Object attribute is assigned with non-object value",t,n,r.logger),{})},ce);function ce(){return null!==ae&&ae.apply(this,arguments)||this}function he(){}var pe,le=(s(fe,pe=Wt),fe.prototype.toJSON=function(t){},fe.prototype.create=function(){return he},fe.prototype.dispose=function(){},fe.prototype.convert=function(t,e,n,r){return null==t||"function"==typeof t?t:(this._log("error","Type-R:InvalidFunction","Function attribute assigned with non-function value",t,n,r.logger),he)},fe.prototype.clone=function(t){return t},fe);function fe(){return null!==pe&&pe.apply(this,arguments)||this}var de,ve=(s(ye,de=Wt),ye.prototype.create=function(){return new Date},ye.prototype.convert=function(t,e,n,r){if(null==t||t instanceof Date)return t;var i=new Date(t),o=i.getTime();return o!=o&&this._log("error","Type-R:InvalidDate","Date attribute assigned with invalid date",t,n,r.logger),i},ye.prototype.validate=function(t,e,n){if(null!=e){var r=e.getTime();if(r!=r)return n+" is Invalid Date"}},ye.prototype.toJSON=function(t){return t&&t.toISOString()},ye.prototype.isChanged=function(t,e){return(t&&t.getTime())!==(e&&e.getTime())},ye.prototype.doInit=function(t,e,n){return this.transform(void 0===t?this.defaultValue():t,void 0,e,n)},ye.prototype.doUpdate=function(t,e,n,r){var i=this.name,o=e.attributes,s=o[i];return this.isChanged(s,o[i]=this.transform(t,s,e,n))},ye.prototype.clone=function(t){return t&&new Date(t.getTime())},ye.prototype.dispose=function(){},ye);function ye(){return null!==de&&de.apply(this,arguments)||this}function ge(t){return!isNaN(new Date(t).getTime())}ge("2011-11-29T15:52:30.5")&&ge("2011-11-29T15:52:30.52")&&ge("2011-11-29T15:52:18.867")&&ge("2011-11-29T15:52:18.867Z")&&ge("2011-11-29T15:52:18.867-03:30")||(ve.prototype.convert=function(t){return null==t||t instanceof Date?t:new Date(function(t){var e,n,r=0;if(n=be.exec(t)){for(var i,o=0;i=me[o];++o)n[i]=+n[i]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,"Z"!==n[8]&&void 0!==n[9]&&(r=60*n[10]+n[11],"+"===n[9]&&(r=0-r)),e=Date.UTC(n[1],n[2],n[3],n[4],n[5]+r,n[6],n[7])}else e=Date.parse(t);return e}(t))});var me=[1,4,5,6,7,10,11],be=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/;var _e,we=Pt.free,Oe=Pt.aquire,Ce=(s(je,_e=Wt),je.prototype.clone=function(t){return t?t.clone():t},je.prototype.toJSON=function(t,e,n){return t&&t.toJSON(n)},je.prototype.doInit=function(t,e,n){var r=n.clone?this.clone(t):void 0===t?this.defaultValue():t,i=this.transform(r,void 0,e,n);return this.handleChange(i,void 0,e,n),i},je.prototype.doUpdate=function(t,e,n,r){var i,o=this.name,s=e.attributes,a=s[o];if(i=this.canBeUpdated(a,t,n)){var u=a._createTransaction(i,n);return!(!u||(r?r.push(u):u.commit(e),!this.propagateChanges))}var c=this.transform(t,a,e,n);return s[o]=c,!!this.isChanged(c,a)&&(this.handleChange(c,a,e,n),!0)},je.prototype.canBeUpdated=function(t,e,n){if(t&&null!=e){if(!(e instanceof this.type))return e;if(n.merge)return e.__inner_state__}},je.prototype.convert=function(t,e,n,r){return null==t?t:t instanceof this.type?(!t._shared||t._shared&wt.persistent||this._log("error","Type-R:InvalidCollection","aggregated collection attribute is assigned with shared collection type",t,n,r.logger),r.merge?t.clone():t._owner?(this._log("warn","Type-R:InvalidOwner","object alreay has an owner and was cloned. Use explicit object.clone() to dismiss this warning.",t,n,r.logger),t.clone()):t):this.type.create(t,r)},je.prototype.dispose=function(t,e){e&&this.handleChange(void 0,e,t,{})},je.prototype.validate=function(t,e){var n=e&&e.validationError;if(n)return n},je.prototype.create=function(){return this.type.create()},je.prototype.initialize=function(t){t.changeHandlers.unshift(this._handleChange)},je.prototype._handleChange=function(t,e,n,r){e&&(we(n,e),r.unset||e.dispose()),t&&Oe(n,t,this.name)},je);function je(){return null!==_e&&_e.apply(this,arguments)||this}var Ee,Ae=j,Se=E,Ne=Pt.free,Pe=Pt.aquire,xe=wt.listen|wt.share,De=(s(Te,Ee=Wt),Te.prototype.doInit=function(t,e,n){var r=n.clone?this.clone(t,e):void 0===t?this.defaultValue():t,i=this.transform(r,void 0,e,n);return this.handleChange(i,void 0,e,n),i},Te.prototype.doUpdate=function(t,e,n,r){var i,o=this.name,s=e.attributes,a=s[o];if(i=this.canBeUpdated(a,t,n)){var u=a._createTransaction(i,n);return!(!u||(r?r.push(u):u.commit(e),!this.propagateChanges))}var c=this.transform(t,a,e,n);return s[o]=c,!!this.isChanged(c,a)&&(this.handleChange(c,a,e,n),!0)},Te.prototype.clone=function(t,e){if(!t||t._owner!==e)return t;var n=t.clone();return Pe(e,n,this.name),n},Te.prototype.toJSON=function(){},Te.prototype.canBeUpdated=function(t,e,n){if(t&&null!=e&&!(e instanceof this.type))return e},Te.prototype.convert=function(t,e,n,r){if(null==t||t instanceof this.type)return t;var i=new this.type(t,r,xe);return Pe(n,i,this.name),i},Te.prototype.validate=function(t,e,n){},Te.prototype.create=function(){return null},Te.prototype._handleChange=function(t,e,n,r){e&&(e._owner===n?(Ne(n,e),r.unset||e.dispose()):Se(e,e._changeEventName,this._onChange,n)),t&&t._owner!==n&&Ae(t,t._changeEventName,this._onChange,n)},Te.prototype.dispose=function(t,e){e&&this.handleChange(void 0,e,t,{})},Te.prototype.initialize=function(t){var r=this;this._onChange=this.propagateChanges?function(t,e,n){this===n||this.forceAttributeChange(r.name,e)}:Re,t.changeHandlers.unshift(this._handleChange)},Te);function Te(){return null!==Ee&&Ee.apply(this,arguments)||this}function Re(){}var ke=[String,Number,Boolean,Date,Object,Array,Function],Ie=[Yt,ne,Yt,ve,ue,oe,le];function Je(t){return t._metatype||function(t){var e=ke.indexOf(t);return e<0?Gt:Ie[e]}(t)}Wt.create=function(t,e){var n=t.type;return new(t._metatype||(n?Je(n):Wt))(e,t)};var Ue=p,ze=(Ve.prototype.check=function(i,o){function r(t,e,n){if(!i.call(t,e,n)){var r=o||i.error||n+" is not valid";return"function"==typeof r?r.call(t,n):r}}var s=this.options.validate;return this.metadata({validate:s?function(t,e,n){return s(t,e,n)||r(t,e,n)}:r})},Object.defineProperty(Ve.prototype,"as",{get:function(){return function(i,o){return function(t,e){var n,r;I.get(t.constructor).mergeObject(t,((n={})[i]=((r={})[e]=o,r),n))}}("attributes",this)},enumerable:!0,configurable:!0}),Object.defineProperty(Ve.prototype,"isRequired",{get:function(){return this.required},enumerable:!0,configurable:!0}),Object.defineProperty(Ve.prototype,"required",{get:function(){return this.metadata({isRequired:!0})},enumerable:!0,configurable:!0}),Ve.prototype.endpoint=function(t){return this.metadata({endpoint:t})},Ve.prototype.watcher=function(t){return this.metadata({_onChange:t})},Ve.prototype.parse=function(t){return this.metadata({parse:t})},Ve.prototype.toJSON=function(t){return this.metadata({toJSON:"function"==typeof t?t:t?function(t,e,n){return t&&t.toJSON(n)}:Me})},Ve.prototype.get=function(t){return this.metadata({getHooks:this.options.getHooks.concat(t)})},Ve.prototype.set=function(o){return this.metadata({transforms:this.options.transforms.concat(function(t,e,n,r){if(this.isChanged(t,e)){var i=o.call(n,t,this.name);return void 0===i?e:this.convert(i,e,n,r)}return e})})},Ve.prototype.changeEvents=function(t){return this.metadata({changeEvents:t})},Ve.prototype.events=function(t){var r=new m(t);return this.metadata({changeHandlers:this.options.changeHandlers.concat(function(t,e,n){e&&e.trigger&&r.unsubscribe(n,e),t&&t.trigger&&r.subscribe(n,t)})})},Object.defineProperty(Ve.prototype,"has",{get:function(){return this},enumerable:!0,configurable:!0}),Ve.prototype.metadata=function(t){var e=new Ve(this.options);return Ue(e.options,t),e},Ve.prototype.value=function(t){return this.metadata({value:t,hasCustomDefault:!0})},Ve.from=function(t){return t&&t instanceof Ve?t:"function"==typeof t?He(t):function(t){var e=function(t){switch(typeof t){case"number":return Number;case"string":return String;case"boolean":return Boolean;case"function":return Function;case"undefined":return;case"object":return t?t.constructor:void 0}}(t);return(e&&e.prototype instanceof St?function(t){return new ze({value:null,type:t,_metatype:De})}(e):He(e)).value(t)}(t)},Ve);function Ve(t){this.options={getHooks:[],transforms:[],changeHandlers:[]},t&&Ue(this.options,t)}function Me(){}function He(t,e){if(t instanceof ze)return t;var n=new ze({type:t}),r=t&&void 0===e?Je(t).defaultValue:e;return void 0===r?n:n.value(r)}function Fe(t,e){return Wt.create(ze.from(t).options,e)}function qe(t,e){var n=h({},t,Fe),r=c({},n,e),i=function(t){var e=Object.keys(t),n=new Function("values","\n        "+e.map(function(t){return"\n            this."+t+" = values."+t+";\n        "}).join("")+"\n    ");n.prototype=Object.prototype;var r=new Function("record","values","options","\n        var _attrs = record._attributes;\n\n        "+e.map(function(t){return"\n            this."+t+" = _attrs."+t+".doInit( values."+t+", record, options );\n        "}).join("")+"\n    ");return r.prototype=Object.prototype,{Attributes:r,AttributesCopy:n}}(r);return y({},i,{_attributes:new i.AttributesCopy(r),_attributesArray:Object.keys(r).map(function(t){return r[t]}),properties:h({},n,function(t){return t.createPropertyDescriptor()})},function(t){var e;for(var n in t){var r=t[n].options._onChange;r&&(e=e||new m).addEvent("change:"+n,"string"==typeof r?Be(r,n):We(r,n))}return e?{_localEvents:e}:{}}(n),{_endpoints:h({},r,function(t){return t.options.endpoint})})}function We(n,r){return function(t,e){n.call(t,e,r)}}function Be(t,n){var e=new gt(t,!0),r=e.local,i=e.resolve,o=e.tail;return r?function(t,e){t[o](e,n)}:function(t,e){i(t)[o](e,n)}}var Ke,Le={save:function(e){var n=this;void 0===e&&(e={});var t=this.getEndpoint(),r=this.toJSON(y({ioMethod:"save"},e));return ft(this,this.isNew()?t.create(r,e,this):t.update(this.id,r,e,this),e,function(t){n.set(t,y({parse:!0,ioMethod:"save"},e))})},fetch:function(e){var n=this;return void 0===e&&(e={}),ft(this,this.getEndpoint().read(this.id,e,this),e,function(t){return n.set(t,y({parse:!0,ioMethod:"fetch"},e))})},destroy:function(e){var n=this;return void 0===e&&(e={}),ft(this,this.getEndpoint().destroy(this.id,e,this),e,function(){var t=n.collection;return t?t.remove(n,e):n.dispose(),n})}},$e=p,Ze=function(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},Ge=0,Qe=(s(Xe,Ke=St),Xe.onDefine=function(t,e){},Object.defineProperty(Xe,"ref",{get:function(){var n=this;return He(this).toJSON(function(t){return t?t.id:null}).parse(function(t){var e;return(e={})[n.prototype.idAttribute]=t,e})},enumerable:!0,configurable:!0}),Xe.extendAttrs=function(t){return this.defaults(t)},Xe.defaults=function(t){return this.extend({attributes:t})},Xe.prototype.previousAttributes=function(){return new this.AttributesCopy(this._previousAttributes)},Object.defineProperty(Xe.prototype,"__inner_state__",{get:function(){return this.attributes},enumerable:!0,configurable:!0}),Object.defineProperty(Xe.prototype,"changed",{get:function(){var t=this._changedAttributes;if(!t){var e=this._previousAttributes;t={};for(var n=this.attributes,r=0,i=this._attributesArray;r<i.length;r++){var o=i[r],s=o.name,a=n[s];o.isChanged(a,e[s])&&(t[s]=a)}this._changedAttributes=t}return t},enumerable:!0,configurable:!0}),Xe.prototype.changedAttributes=function(t){if(!t)return!!this.hasChanged()&&y({},this.changed);var e,n=!1,r=this._transaction?this._previousAttributes:this.attributes,i=this._attributes;for(var o in t)i[o].isChanged(r[o],e=t[o])&&((n=n||{})[o]=e);return n},Xe.prototype.hasChanged=function(t){var e=this._previousAttributes;return!!e&&(t?this._attributes[t].isChanged(this.attributes[t],e[t]):!Ze(this.changed))},Xe.prototype.previous=function(t){if(t){var e=this._previousAttributes;if(e)return e[t]}return null},Xe.prototype.isNew=function(){return null==this.id},Xe.prototype.has=function(t){return null!=this[t]},Xe.prototype.unset=function(t,e){var n,r=this[t];return this.set(((n={})[t]=void 0,n),y({unset:!0},e)),r},Xe.prototype.clear=function(t){var n=this,r=t&&t.nullify;return this.transaction(function(){n.forEach(function(t,e){return n[e]=r?null:void 0})},t),this},Xe.prototype.getOwner=function(){var t=this._owner;return this._ownerKey?t:t&&t._owner},Object.defineProperty(Xe.prototype,"id",{get:function(){return this.attributes[this.idAttribute]},set:function(t){kt(this,this.idAttribute,t)},enumerable:!0,configurable:!0}),Xe.prototype.defaults=function(t){void 0===t&&(t={});for(var e={},n=0,r=this._attributesArray;n<r.length;n++){var i=r[n],o=i.name,s=t[o];e[o]=void 0===s?i.defaultValue():s}return e},Xe.prototype.initialize=function(t,e){},Xe.prototype.clone=function(t){void 0===t&&(t={});var e=new this.constructor(this.attributes,{clone:!0});return t.pinStore&&(e._defaultStore=this.getStore()),e},Xe.prototype._validateNested=function(t){for(var e=0,n=this.attributes,r=0,i=this._attributesArray;r<i.length;r++){var o=i[r],s=o.name,a=o.validate(this,n[s],s);a&&(t[s]=a,e++)}return e},Xe.prototype.get=function(t){return this[t]},Xe.prototype.set=function(t,e){if(t){var n=this._createTransaction(t,e);n&&n.commit()}return this},Xe.prototype.toJSON=function(t){for(var e={},n=this.attributes,r=0,i=this._attributesArray;r<i.length;r++){var o=i[r],s=o.name,a=n[s];if(void 0!==a){var u=o.toJSON.call(this,a,s,t);void 0!==u&&(e[s]=u)}}return e},Xe.prototype.parse=function(t,e){return t},Xe.prototype.deepSet=function(h,p,l){var f=this;return this.transaction(function(){for(var t,e=h.split("."),n=e.length-1,r=e[n],i=f,o=0;o<n;o++){var s=e[o],a=i.get?i.get(s):i[s];if(!a){var u=i._attributes;if(!u)return;var c=u[s].create();l&&l.nullify&&c._attributes&&c.clear(l),i[s]=a=c}i=a}i.set?i.set(((t={})[r]=p,t),l):i[r]=p}),this},Object.defineProperty(Xe.prototype,"collection",{get:function(){return this._ownerKey?null:this._owner},enumerable:!0,configurable:!0}),Xe.prototype.dispose=function(){if(!this._disposed){for(var t=this.attributes,e=0,n=this._attributesArray;e<n.length;e++){var r=n[e];r.dispose(this,t[r.name])}Ke.prototype.dispose.call(this)}},Xe.prototype._log=function(t,e,n,r,i){(i||ut).trigger(t,e,this.getClassName()+" "+n,y({},r,{Record:this,"Attributes definition":this._attributes}))},Xe.prototype.getClassName=function(){return Ke.prototype.getClassName.call(this)||"Record"},Xe.prototype._createTransaction=function(t,e){},Xe.prototype.forEach=function(n,r){var t=void 0!==r?function(t,e){return n.call(r,t,e)}:n,e=this.attributes;for(var i in this.attributes){var o=e[i];void 0!==o&&t(o,i)}},Xe.prototype.mapObject=function(t,e){var n=void 0===e?t:t.bind(e);return h({},this.attributes,n)},Xe.prototype[Symbol.iterator]=function(){return new nn(this)},Xe.prototype.entries=function(){return new nn(this)},Xe.prototype.keys=function(){var n=[];return this.forEach(function(t,e){return n.push(e)}),n},Xe._metatype=Ce,Xe.id=He(String).value(null),Xe=u([R({cidPrefix:"m",_changeEventName:"change",idAttribute:"id"}),k({defaults:V.merge,attributes:V.merge,collection:V.merge,Collection:V.value,idAttribute:V.protoValue})],Xe));function Xe(t,e){var n=Ke.call(this,Ge++)||this;n.attributes={};var r=e||{},i=(r.parse?n.parse(t,r):t)||{};return rt||function(t,e,n){if(Vt(t,e,n)){var r=t._attributes,i=void 0;for(var o in e)r[o]||(i=i||[]).push("'"+o+"'");i&&zt(t,i,{values:e},n)}}(n,i,r),n._previousAttributes=n.attributes=new n.Attributes(n,i,r),n.initialize(t,e),n._localEvents&&n._localEvents.subscribe(n,n),n}$e(Qe.prototype,Ut,Le);function Ye(t,e,n){this.id=e.id}Qe.prototype.Attributes=Ye;function tn(t){this.id=t.id}Qe.prototype.AttributesCopy=tn;var en=Wt.create({value:void 0},"id");Qe.prototype._attributes={id:en},Qe.prototype._attributesArray=[en];var nn=(rn.prototype.next=function(){var t=this.record,e=t._attributesArray[this.idx++];return{done:!e,value:e?[e.name,t[e.name]]:void 0}},rn);function rn(t){this.record=t,this.idx=0}var on=p,sn=c;Qe.onExtend=function(t){St.onExtend.call(this,t);var e,n=this,r=(s(i,e=t.Collection),i.model=n,i=u([T],i));function i(){return null!==e&&e.apply(this,arguments)||this}this.DefaultCollection=r,n.Collection===t.Collection&&(this.Collection=r)},Qe.onDefine=function(t,e){var n=e.prototype,r=qe(this.attributes=function(t){var e=t.defaults,n=t.attributes,r=t.idAttribute,i=n||e||{};!r||r in i||(i[r]=void 0);return i}(t),n._attributes),i=r.properties,o=r._localEvents,s=a(r,["properties","_localEvents"]);on(this.prototype,s),t.properties=sn(t.properties||{},i),t._localEvents=o,St.onDefine.call(this,t,e),this.DefaultCollection.define(t.collection||{}),this.Collection=t.Collection,this.Collection.prototype.model=this,t.endpoint&&(this.Collection.prototype._endpoint=t.endpoint)};var an=S,un=N,cn=j,hn=E,pn=Pt.commit,ln=Pt.aquire,fn=Pt.free;function dn(t,e,n){var r,i=t.model;t._shared?(r=e instanceof i?e:i.create(e,n),t._shared&wt.listen&&cn(r,r._changeEventName,t._onChildrenChange,t)):(r=e instanceof i?n.merge?e.clone():e:i.create(e,n))._owner?r._owner!==t&&(ln(t,r.clone()),(t._aggregationError||(t._aggregationError=[])).push(r)):ln(t,r);var o=t._itemEvents;return o&&o.subscribe(t,r),r}function vn(t,e,n){t._shared?t._shared&wt.listen&&hn(e,e._changeEventName,t._onChildrenChange,t):(fn(t,e),n||e.dispose());var r=t._itemEvents;r&&r.unsubscribe(t,e)}function yn(t,e){var n=t._comparator;return!(!n||!1===e.sort)&&(t.models.sort(n),!0)}function gn(t,e){var n=(t[e.cid]=e).id;!n&&0!==n||(t[n]=e)}function mn(t,e){delete t[e.cid];var n=e.id;!n&&0!==n||delete t[n]}function bn(t,e){delete t[e.previous(e.idAttribute)];var n=e.id;null==n||(t[n]=e)}var _n=(wn.prototype.commit=function(t){for(var e=this.nested,n=this.object,r=n._isDirty,i=0,o=e;i<o.length;i++)(u=o[i]).commit(n);n._aggregationError&&On(n,r);for(var s=0,a=e;s<a.length;s++){var u=a[s];an(n,"change",u.object,r)}for(var c=this.added,h=this.removed,p=0,l=c;p<l.length;p++){var f=l[p];un(f,"add",f,n,r),un(n,"add",f,n,r)}for(var d=0,v=h;d<v.length;d++)f=v[d],un(f,"remove",f,n,r),un(n,"remove",f,n,r);this.sorted&&an(n,"sort",n,r),(c.length||h.length)&&an(n,"update",n,r),this.isRoot&&pn(n,t)},wn);function wn(t,e,n,r,i,o){this.object=t,this.isRoot=e,this.added=n,this.removed=r,this.nested=i,this.sorted=o}function On(t,e){t._log("warn","Type-R:InvalidOwner","added records already have an owner and were cloned. Use explicit record.clone() to dismiss this warning.",t._aggregationError,e.logger),t._aggregationError=void 0}var Cn=Pt.begin,jn=Pt.commit,En=Pt.markAsDirty;function An(t,e,n,r){var i=Cn(t),o=[],s=function(t,e,n,r,i){for(var o=t._byId,s=t.models,a=(i||r.merge)&&!t._shared,u=(r.parse,t.model.prototype.idAttribute),c=s.length,h=0,p=e;h<p.length;h++){var l=p[h],f=l?o[l[u]]||o[l.cid]:null;if(f){if(a&&l!==f){var d=l.attributes||l,v=f._createTransaction(d,r);v&&n.push(v),f.hasChanged(u)&&bn(o,f)}}else f=dn(t,l,r),s.push(f),gn(o,f)}return s.slice(c)}(t,e,o,n,r);if(s.length||o.length){var a=function(t,e,n){var r=n.at;if(null==r)return yn(t,n);var i=t.models.length-e.length;(r=Number(r))<0&&(r+=1+i);r<0&&(r=0);i<r&&(r=i);return function(t,e,n){for(var r=t.length-1,i=r-n.length;e<=i;i--,r--)t[r]=t[i];for(i=0,r=e;i<n.length;i++,r++)t[r]=n[i]}(t.models,r,e),!1}(t,s,n);if(En(t,n))return new _n(t,i,s,[],o,a);t._aggregationError&&On(t,n)}i&&jn(t)}var Sn=S,Nn=N,Pn=Pt.markAsDirty,xn=Pt.begin,Dn=Pt.commit;function Tn(t,e,n){var r=function(t,e,n){for(var r=Array(e.length),i=t._byId,o=0,s=0;o<e.length;o++){var a=t.get(e[o]);a&&(r[s++]=a,mn(i,a),vn(t,a,n))}return r.length=s,r}(t,e,n.unset);if(r.length){var i=xn(t);if(function(t,e){for(var n=t.models,r=t.models=Array(n.length-e),i=t._byId,o=0,s=0;o<n.length;o++){var a=n[o];i[a.cid]&&(r[s++]=a)}r.length=s}(t,r.length),Pn(t,n))new _n(t,i,[],r,[],!1).commit();else i&&Dn(t)}return r}var Rn=Pt.begin,kn=Pt.commit,In=Pt.markAsDirty,Jn={silent:!0};function Un(t,e,n,r){var i=Rn(t),o=function(t,e,n){for(var r=e?e.length:0,i=Array(r),o={},s=t.model.prototype.idAttribute,a=0,u=0;a<r;a++){var c=e[a];if(!c||!o[c[s]]&&!o[c.cid]){var h=dn(t,c,n);i[u++]=h,gn(o,h)}}return i.length=u,t._byId=o,t.models=i}(t,e,n);if(o.length){var s=yn(t,n);if(In(t,r?Jn:n))return new _n(t,i,o.slice(),[],[],s);t._aggregationError&&On(t,n)}i&&kn(t)}function zn(t,e,n){var r=Rn(t),i=[],o=t.models,s=function(t,e,n,r){for(var i=Array(e.length),o={},s=(null==r.merge||r.merge)&&!t._shared,a=t._byId,u=t.models,c=t.model.prototype.idAttribute,h=[],p=!0,l=0,f=0;l<e.length;l++){var d=e[l],v=null;if(d){var y=d[c],g=d.cid;if(o[y]||o[g])continue;v=a[y]||a[g]}if(v){if(s&&d!==v){p&&u[f]!==v&&(p=!1);var m=d.attributes||d,b=v._createTransaction(m,r);b&&n.push(b)}}else v=dn(t,d,r),h.push(v);i[f++]=v,gn(o,v)}i.length=f,t.models=i,t._byId=o,p||(r.sorted=!0);return h}(t,e,i,n),a=t.models.length-s.length,u=a<o.length?a?function(t,e){for(var n=t._byId,r=[],i=0,o=e;i<o.length;i++){var s=o[i];n[s.cid]||(r.push(s),vn(t,s))}return r}(t,o):function(t,e){for(var n=0,r=e;n<r.length;n++){vn(t,r[n])}return e}(t,o):[],c=i.length||s.length,h=yn(t,n)&&c||s.length||n.sorted;if(c||u.length||h){if(In(t,n))return new _n(t,r,s,u,i,h);t._aggregationError&&On(t,n)}r&&kn(t)}var Vn=(Mn.prototype.map=function(t,e){for(var n=this.models,r=n.length,i=Array(r),o=e?t.bind(e):t,s=0,a=0;s<r;s++){var u=o(n[s],s);void 0===u||(i[a++]=u)}return s!==a&&(i.length=a),i},Mn.prototype.each=function(t,e){for(var n=this.models,r=n.length,i=e?t.bind(e):t,o=0;o<r;o++)i(n[o],o)},Mn.prototype.firstMatch=function(t,e){for(var n=this.models,r=n.length,i=e?t.bind(e):t,o=0;o<r;o++){var s=i(n[o],o);if(void 0!==s)return s}},Mn.prototype.reduce=function(t,e){return void 0===e?this.models.reduce(t):this.models.reduce(t,e)},Mn.prototype.slice=function(t,e){return this.models.slice(t,e)},Mn.prototype.indexOf=function(t){return this.models.indexOf(this.get(t))},Mn.prototype.includes=function(t){return Boolean(this.get(t))},Mn.prototype.filter=function(t,e){var n=Fn(t);return this.map(function(t){return n(t)?t:void 0},e)},Mn.prototype.find=function(t,e){var n=Fn(t);return this.firstMatch(function(t){return n(t)?t:void 0},e)},Mn.prototype.some=function(t,e){return Boolean(this.find(t,e))},Mn.prototype.forEach=function(t,e){this.each(t,e)},Mn.prototype.values=function(){return this.models.values()},Mn.prototype.entries=function(){return this.models.entries()},Mn.prototype.every=function(t,e){var n=Fn(t);return void 0===this.firstMatch(function(t){return!!n(t)&&void 0},e)},Mn.prototype.pluck=function(e){return this.map(function(t){return t[e]})},Mn.prototype.first=function(){return this.models[0]},Mn.prototype.last=function(){return this.models[this.models.length-1]},Mn.prototype.at=function(t){var e=t<0?t+this.models.length:t;return this.models[e]},Mn);function Mn(){}var Hn=function(t){return t};function Fn(i){if(null==i)return Hn;switch(typeof i){case"function":return i;case"object":var o=Object.keys(i);return function(t){for(var e=0,n=o;e<n.length;e++){var r=n[e];if(i[r]!==t[r])return!1}return!0};default:throw new Error("Invalid iteratee")}}var qn,Wn=S,Bn=Pt.begin,Kn=Pt.commit,Ln=Pt.markAsDirty,$n=0,Zn=(s(Gn,qn=De),Gn.defaultValue=[],Gn);function Gn(){return null!==qn&&qn.apply(this,arguments)||this}var Qn,Xn=(s(Yn,Qn=St),Yn.of=function(t){return t.Collection},Yn.ofRefs=function(t){return t.Collection.Refs},Yn.prototype.createSubset=function(t,e){throw new ReferenceError("Failed dependency injection")},Yn.onExtend=function(t){var r=this;function e(t,e,n){r.call(this,t,e,wt.share|(n?wt.listen:0))}this._SubsetOf=null,x.mixins.populate(e),e.prototype=this.prototype,e._metatype=Zn,this.Refs=this.Subset=e,St.onExtend.call(this,t)},Yn.onDefine=function(t,e){if(t.itemEvents){var n=new m(e.prototype._itemEvents);n.addEventsMap(t.itemEvents),this.prototype._itemEvents=n}void 0!==t.comparator&&(this.prototype.comparator=t.comparator),St.onDefine.call(this,t)},Object.defineProperty(Yn.prototype,"__inner_state__",{get:function(){return this.models},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"comparator",{get:function(){return this._comparator},set:function(i){var o=this;switch(typeof i){case"string":this._comparator=function(t,e){var n=t[i],r=e[i];return n===r?0:n<r?-1:1};break;case"function":1===i.length?this._comparator=function(t,e){var n=i.call(o,t),r=i.call(o,e);return n===r?0:n<r?-1:1}:this._comparator=function(t,e){return i.call(o,t,e)};break;default:this._comparator=null}},enumerable:!0,configurable:!0}),Yn.prototype.getStore=function(){return this._store||(this._store=this._owner?this._owner.getStore():this._defaultStore)},Yn.prototype._onChildrenChange=function(t,e,n){if(void 0===e&&(e={}),n!==this){var r=this.idAttribute;t.hasChanged(r)&&bn(this._byId,t);var i=Bn(this);Ln(this,e)&&Wn(this,"change",t,e),i&&Kn(this)}},Yn.prototype.get=function(t){if(null!=t){if("object"!=typeof t)return this._byId[t];var e=t[this.idAttribute];return void 0!==e&&this._byId[e]||this._byId[t.cid]}},Yn.prototype[Symbol.iterator]=function(){return this.models[Symbol.iterator]()},Yn.prototype.updateEach=function(t){var e=Pt.begin(this);this.each(t),e&&Pt.commit(this)},Yn.prototype._validateNested=function(n){if(this._shared)return 0;var r=0;return this.each(function(t){var e=t.validationError;e&&(n[t.cid]=e,r++)}),r},Yn.prototype.initialize=function(){},Yn.prototype.clone=function(t){void 0===t&&(t={});var e=this._shared&wt.share?this.models:this.map(function(t){return t.clone()}),n=new this.constructor(e,{model:this.model,comparator:this.comparator},this._shared);return t.pinStore&&(n._defaultStore=this.getStore()),n},Yn.prototype.toJSON=function(e){return this.map(function(t){return t.toJSON(e)})},Yn.prototype.set=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e={}),void 0!==e.add&&this._log("warn","Type-R:InvalidOption","Collection.set doesn't support 'add' option, behaving as if options.add === true.",e),e.reset)this.reset(t,e);else{var n=this._createTransaction(t,e);n&&n.commit()}return this},Yn.prototype.liveUpdates=function(t){var e=this;if(t){this.liveUpdates(!1);var n="function"==typeof t?t:function(){return!0};return this._liveUpdates={updated:function(t){n(t)&&e.add(t,{parse:!0,merge:!0})},removed:function(t){return e.remove(t)}},this.getEndpoint().subscribe(this._liveUpdates,this).then(function(){return e})}this._liveUpdates&&(this.getEndpoint().unsubscribe(this._liveUpdates,this),this._liveUpdates=null)},Yn.prototype.fetch=function(t){var n=this;void 0===t&&(t={});var r=y({parse:!0},t),e=this.getEndpoint();return ft(this,e.list(r,this),r,function(t){var e=n.set(t,y({parse:!0,ioMethod:"fetch"},r));return r.liveUpdates&&(e=n.liveUpdates(r.liveUpdates)),e})},Yn.prototype.dispose=function(){if(!this._disposed){for(var t=!this._shared,e=0,n=this.models;e<n.length;e++){var r=n[e];vn(this,r),t&&r.dispose()}this.liveUpdates(!1),Qn.prototype.dispose.call(this)}},Yn.prototype.reset=function(t,e){void 0===e&&(e={});var n=Bn(this),r=this.models;t?Un(this,tr(this,t,e),e,!0):(this._byId={},this.models=[]),Ln(this,e),e.silent||Wn(this,"reset",this,y({previousModels:r},e));for(var i=this._byId,o=0,s=r;o<s.length;o++){var a=s[o];i[a.cid]||vn(this,a)}return n&&Kn(this),this.models},Yn.prototype.add=function(t,e){void 0===e&&(e={});var n=tr(this,t,e),r=this.models.length?An(this,n,e):Un(this,n,e);if(r)return r.commit(),r.added},Yn.prototype.remove=function(t,e){return void 0===e&&(e={}),t?Array.isArray(t)?Tn(this,t,e):function(t,e,n){var r=t.get(e);if(r){var i=xn(t),o=t.models;o.splice(o.indexOf(r),1),mn(t._byId,r);var s=Pn(t,n);return s&&(Nn(r,"remove",r,t,n),Nn(t,"remove",r,t,n)),vn(t,r,n.unset),s&&Sn(t,"update",t,n),i&&Dn(t),r}}(this,t,e):[]},Yn.prototype._createTransaction=function(t,e){void 0===e&&(e={});var n=tr(this,t,e);return this.models.length?!1===e.remove?An(this,n,e,!0):zn(this,n,e):Un(this,n,e)},Yn.prototype.sort=function(t){if(void 0===t&&(t={}),yn(this,t)){var e=Bn(this);Ln(this,t)&&Wn(this,"sort",this,t),e&&Kn(this)}return this},Yn.prototype.unset=function(t,e){var n=this.get(t);return this.remove(t,y({unset:!0},e)),n},Yn.prototype.modelId=function(t){return t[this.model.prototype.idAttribute]},Yn.prototype.toggle=function(t,e){var n=Boolean(this.get(t)),r=void 0===e?!n:Boolean(e);return n!==r&&(n?this.remove(t):this.add(t)),r},Yn.prototype._log=function(t,e,n,r,i){(i||ut).trigger(t,e,this.model.prototype.getClassName()+"."+this.getClassName()+": "+n,{Argument:r,"Attributes spec":this.model.prototype._attributes})},Yn.prototype.getClassName=function(){return Qn.prototype.getClassName.call(this)||"Collection"},Object.defineProperty(Yn.prototype,"length",{get:function(){return this.models.length},enumerable:!0,configurable:!0}),Yn.prototype.push=function(t,e){return this.add(t,y({at:this.length},e))},Yn.prototype.pop=function(t){var e=this.at(this.length-1);return this.remove(e,y({unset:!0},t)),e},Yn.prototype.unshift=function(t,e){return this.add(t,y({at:0},e))},Yn.prototype.shift=function(t){var e=this.at(0);return this.remove(e,y({unset:!0},t)),e},Yn._metatype=Ce,Yn=u([R({cidPrefix:"c",model:Qe,_changeEventName:"changes",_aggregationError:null}),z(Vn),k({comparator:V.value,model:V.protoValue,itemEvents:V.merge})],Yn));function Yn(t,e,n){void 0===e&&(e={});var r=Qn.call(this,$n++)||this;r.models=[],r._byId={},r.comparator=r.comparator,void 0!==e.comparator&&(r.comparator=e.comparator,e.comparator=void 0),r.model=r.model,e.model&&(r.model=e.model,e.model=void 0),r.idAttribute=r.model.prototype.idAttribute,r._shared=n||0,t&&Un(r,tr(r,t,e),e,!0);return r.initialize.apply(r,arguments),r._localEvents&&r._localEvents.subscribe(r,r),r}function tr(t,e,n){var r=n.parse?t.parse(e,n):e;return Array.isArray(r)?r:[r]}Qe.Collection=Xn;var er;s(nr,er=Wt),nr.prototype.toJSON=function(t){return t&&"object"==typeof t?t.id:t},nr.prototype.clone=function(t){return t&&"object"==typeof t?t.id:t},nr.prototype.isChanged=function(t,e){return(t&&(null==t.id?t:t.id))!==(e&&(null==e.id?e:e.id))},nr.prototype.validate=function(t,e,n){};function nr(){return null!==er&&er.apply(this,arguments)||this}function rr(t,e){var n=e||Xn,r=n._SubsetOf||(n._SubsetOf=function(t){var e=function(o){function t(t,e){var n=o.call(this,[],e,ir)||this;return n.resolvedWith=null,n.refs=ar(t),n}return s(t,o),Object.defineProperty(t.prototype,"__inner_state__",{get:function(){return this.refs||this.models},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){void 0===e&&(e={});var n=this.resolvedWith,r=ar(t);if(n)return o.prototype.add.call(this,or(n,r),e);if(r.length){var i=Pt.begin(this);this.refs=this.refs?this.refs.concat(r):r.slice(),Pt.markAsDirty(this,e),i&&Pt.commit(this)}},t.prototype.reset=function(t,e){void 0===e&&(e={});var n=this.resolvedWith,r=ar(t);return n?o.prototype.reset.call(this,or(n,r),e):sr(this,r,e)||[]},t.prototype._createTransaction=function(t,e){var n=this.resolvedWith,r=ar(t);return n?o.prototype._createTransaction.call(this,or(n,r),e):sr(this,r,e)},t.prototype.toJSON=function(){return this.refs?this.refs.map(function(t){return t.id||t}):this.models.map(function(t){return t.id})},t.prototype._validateNested=function(){return 0},Object.defineProperty(t.prototype,"length",{get:function(){return this.models.length||(this.refs?this.refs.length:0)},enumerable:!0,configurable:!0}),t.prototype.clone=function(t){var e=new this.constructor([],{model:this.model,comparator:this.comparator});return this.resolvedWith?(e.resolvedWith=this.resolvedWith,e.refs=null,e.reset(this.models,{silent:!0})):e.refs=this.refs.slice(),e},t.prototype.parse=function(t){return t},t.prototype.resolve=function(t){return t&&t.length&&(this.resolvedWith=t,this.refs&&(this.reset(this.refs,{silent:!0}),this.refs=null)),this},t.prototype.getModelIds=function(){return this.toJSON()},t.prototype.toggle=function(t,e){return o.prototype.toggle.call(this,this.resolvedWith.get(t),e)},t.prototype.addAll=function(){if(this.resolvedWith)return this.set(this.resolvedWith.models),this.models;throw new Error("Cannot add elemens because the subset collection is not resolved yet.")},t.prototype.toggleAll=function(){return this.length?this.reset():this.addAll()},t=u([R],t)}(t);return e.prototype._itemEvents=void 0,e}(n)),i=function(e){switch(typeof e){case"function":return function(t){return e.call(t)};case"object":return function(){return e};case"string":return new gt(e).resolve}}(t);return He(r).get(function(t){return!t||t.resolvedWith||t.resolve(i(this)),t})}Xn.prototype.createSubset=function(t,e){var n=new(rr(this,this.constructor).options.type)(t,e);return n.resolve(this),n};var ir=wt.share|wt.persistent;function or(t,e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r],s=t.get(o);s&&n.push(s)}return n}function sr(t,e,n){if(d(t.refs,e)){var r=Pt.begin(t);t.refs=e.slice(),Pt.markAsDirty(t,n),r&&Pt.commit(t)}}function ar(t){return t?Array.isArray(t)?t:[t]:[]}var ur,cr,hr=null,pr=(s(lr,ur=Qe),lr.prototype.getStore=function(){return this},lr.prototype.get=function(t){var e=this[t];return e||this===this._defaultStore?e:this._owner?this._owner.get(t):this._defaultStore.get(t)},Object.defineProperty(lr,"global",{get:function(){return hr},set:function(t){hr&&hr.dispose(),St.prototype._defaultStore=hr=t},enumerable:!0,configurable:!0}),lr);function lr(){return null!==ur&&ur.apply(this,arguments)||this}pr.global=new pr,"undefined"==typeof Symbol&&Object.defineProperty(window,"Symbol",{value:{iterator:"Symbol.iterator"},configurable:!0});(cr=Y).on,cr.off,cr.trigger,cr.once,cr.listenTo,cr.stopListening,cr.listenToOnce;var fr,dr=/\/Date\(([0-9]+)\)\//,vr=(s(yr,fr=ve),yr.prototype.convert=function(t){if("string"==typeof t){var e=dr.exec(t);if(e)return new Date(Number(e[1]))}return ve.prototype.convert.apply(this,arguments)},yr.prototype.toJSON=function(t){return t&&"/Date("+t.getTime()+")/"},yr);function yr(){return null!==fr&&fr.apply(this,arguments)||this}var gr=new ze({type:Date,_metatype:vr}),mr=He(Date).toJSON(function(t){return t&&t.getTime()});function br(t){return t?Math.round(t):0}br._metatype=ne;var _r=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/i;function wr(t){return!t||_r.test(t)}wr.error="Not valid URL";He(String).check(wr);var Or=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;function Cr(t){return!t||Or.test(t)}Cr.error="Not valid IP address";He(String).check(Cr);var jr=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i;function Er(t){return!t||!!t.match(jr)}Er.error="Not valid email";He(String).check(Er);Function.prototype.value=function(t){return new ze({type:this,value:t,hasCustomDefault:!0})},Object.defineProperty(Function.prototype,"isRequired",{get:function(){return this._isRequired||this.has.isRequired},set:function(t){this._isRequired=t}}),Object.defineProperty(Function.prototype,"asProp",{get:function(){return this.has.asProp}}),Object.defineProperty(Function.prototype,"has",{get:function(){return this._has||He(this)},set:function(t){this._has=t}}),Object.defineProperties(Date,{microsoft:{value:gr},timestamp:{value:mr}}),Number.integer=br,"undefined"!=typeof window&&(window.Integer=br)});
//# sourceMappingURL=index.js.map
