!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react"),require("@type-r/models")):"function"==typeof define&&define.amd?define(["exports","react","@type-r/models"],n):n((e=e||self).Nested={},e.React,e.Nested)}(this,function(e,u,n){"use strict";var t=c(function(e){return new o(new e)}),r={of:c(function(e){return new o(new(n.Collection.of(e)))}),ofRefs:c(function(e){return new o(new(n.Collection.ofRefs(e)))}),subsetOf:c(function(e){return new o(e.createSubset([]))})},o=(f.prototype.getStore=function(){return this.value._defaultStore},f);function f(e){this.value=e,this._onChildrenChange=void 0,this._changeToken=e._changeToken,e._owner=this,e._ownerKey||(e._ownerKey="reactState")}function i(e){if(e._changeToken===e.value._changeToken)return e;var n=new o(e.value);return n._onChildrenChange=e._onChildrenChange,n}function c(o){return function(e){var n=u.useReducer(i,e,o),t=n[0],r=n[1];return u.useEffect(function(){return t._onChildrenChange=function(e){return r(e)},function(){return t.value.dispose()}},s),t.value}}var s=[];var a=[];function l(){return u.useReducer(d,null)[1]}function d(e,n){return n._changeToken}e.useChanges=function(e){var n=l();u.useEffect(function(){return e.onChanges(n),function(){return e.offChanges(n)}},a)},e.useCollection=r,e.useForceUpdate=l,e.useModel=t,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
