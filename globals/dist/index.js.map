{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import { Integer, MicrosoftDate, Timestamp } from '@type-r/ext-types';\r\nimport { type, ChainableAttributeSpec } from '@type-r/models';\r\n\r\n/*\r\n * dates\r\n */\r\ndeclare global {\r\n    // Legacy has-notation\r\n    interface Function{\r\n        value : ( x : any ) => ChainableAttributeSpec<any>;\r\n        isRequired : ChainableAttributeSpec<any>;\r\n        asProp : PropertyDecorator\r\n        has : ChainableAttributeSpec<any>;\r\n    }\r\n\r\n    // Date type extensions\r\n    interface DateConstructor {\r\n        microsoft : ChainableAttributeSpec<this>\r\n        timestamp : ChainableAttributeSpec<this>\r\n    }\r\n\r\n    // Integer type\r\n    interface Window {\r\n        Integer : Function;\r\n    }\r\n\r\n    interface NumberConstructor {\r\n        integer : typeof Integer\r\n    }\r\n}\r\n\r\nFunction.prototype.value = function( x ) {\r\n    return new ChainableAttributeSpec( { type : this, value : x, hasCustomDefault : true } );\r\n};\r\n\r\nObject.defineProperty( Function.prototype, 'isRequired', {\r\n    get() { return this._isRequired || this.has.isRequired; },\r\n    set( x ){ this._isRequired = x; }\r\n});\r\n\r\nObject.defineProperty( Function.prototype, 'asProp', {\r\n    get() { return this.has.asProp; },\r\n});\r\n\r\nObject.defineProperty( Function.prototype, 'has', {\r\n    get() {\r\n        // workaround for sinon.js and other libraries overriding 'has'\r\n        return this._has || type( this );\r\n    },\r\n\r\n    set( value ) { this._has = value; }\r\n} );\r\n\r\n\r\nObject.defineProperties( Date, {\r\n    microsoft: {\r\n        value: MicrosoftDate\r\n    },\r\n\r\n    timestamp: {\r\n        value: Timestamp\r\n    }\r\n} );\r\n\r\n\r\n/*\r\n * integer\r\n */\r\n\r\nNumber.integer = Integer;\r\n\r\nif( typeof window !== 'undefined' ) {\r\n    window.Integer = Integer;\r\n}"],"names":["Function","prototype","value","x","ChainableAttributeSpec","type","this","hasCustomDefault","Object","defineProperty","get","_isRequired","has","isRequired","set","asProp","_has","defineProperties","Date","microsoft","MicrosoftDate","timestamp","Timestamp","Number","integer","Integer","window"],"mappings":"6RA+BAA,SAASC,UAAUC,MAAQ,SAAUC,GACjC,OAAO,IAAIC,yBAAwB,CAAEC,KAAOC,KAAMJ,MAAQC,EAAGI,kBAAmB,KAGpFC,OAAOC,eAAgBT,SAASC,UAAW,aAAc,CACrDS,eAAQ,OAAOJ,KAAKK,aAAeL,KAAKM,IAAIC,YAC5CC,aAAKX,GAAKG,KAAKK,YAAcR,KAGjCK,OAAOC,eAAgBT,SAASC,UAAW,SAAU,CACjDS,eAAQ,OAAOJ,KAAKM,IAAIG,UAG5BP,OAAOC,eAAgBT,SAASC,UAAW,MAAO,CAC9CS,eAEI,OAAOJ,KAAKU,MAAQX,OAAMC,OAG9BQ,aAAKZ,GAAUI,KAAKU,KAAOd,KAI/BM,OAAOS,iBAAkBC,KAAM,CAC3BC,UAAW,CACPjB,MAAOkB,iBAGXC,UAAW,CACPnB,MAAOoB,eASfC,OAAOC,QAAUC,UAEK,oBAAXC,SACPA,OAAOD,QAAUA"}